import{d as b,r as m,c as o,a as n,F as l,b as g,w as f,v,o as r,t as _,p as x,e as w,_ as y}from"./index-799e837d.js";var d=(e=>(e[e.Ok=200]="Ok",e[e.BadRequest=400]="BadRequest",e[e.InteralServerError=500]="InteralServerError",e))(d||{});const h=e=>(x("data-v-a4ece99b"),e=e(),w(),e),k={class:"text-dark-300 flex flex-col w-100vw h-100vh p-4 box-border"},C=h(()=>n("h1",{class:"text-center text-lg m-0"}," ChatGPT Playground ",-1)),B={class:"flex-1 mt-4 w-full m-auto p-4 b-gray-300 b-solid b-2 rounded-lg box-border"},I={key:0,class:"message"},S={key:1,class:"message !float-right"},E=h(()=>n("div",{class:"clearfix"},null,-1)),O={class:"pb-4 mt-4"},T={class:"flex w-full h-4em"},q=b({__name:"index",setup(e){const t=m({messages:[{sentBy:"chat-gpt",content:"以下对话由 AI 自动生成，请输入任意内容。"}],editContent:"",editing:!1}),p=async c=>{if(c==null||c.preventDefault(),!t.editing){if(!t.editContent){window.alert("请输入信息");return}t.messages.push({sentBy:"human",content:t.editContent}),t.editContent="";try{const a=await window.fetch("/api/chat",{body:JSON.stringify({prompt:t.messages[t.messages.length-1].content}),headers:{"Content-Type":"application/json"},method:"POST"});let s;switch(a.status){case d.Ok:a.json().then(i=>{t.messages.push({sentBy:"chat-gpt",content:i.ai_text})});break;case d.BadRequest:s="请求参数错误";break;case d.InteralServerError:s="服务器错误";break;default:s="未知错误"}if(s!==void 0)throw new Error(`${s}，请重新发送消息`)}catch(a){window.alert(a.message)}}},u=()=>{window.fetch("/api/reset")};return(c,a)=>(r(),o("div",k,[C,n("div",B,[(r(!0),o(l,null,g(t.messages,(s,i)=>(r(),o(l,{key:i},[s.sentBy==="chat-gpt"?(r(),o("div",I,_(s.content),1)):(r(),o("div",S,_(s.content),1)),E],64))),128))]),n("div",O,[n("div",T,[f(n("textarea",{"onUpdate:modelValue":a[0]||(a[0]=s=>t.editContent=s),contenteditable:"",class:"flex-1 p-2 b-gray-300 b-solid b-2 rounded-lg"},null,512),[[v,t.editContent]]),n("button",{class:"button",onClick:p}," Submit "),n("button",{class:"button",onClick:u}," Clear ")])])]))}});const P=y(q,[["__scopeId","data-v-a4ece99b"]]);export{P as default};
